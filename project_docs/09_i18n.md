# Internationalization (i18n)

> Multi-language support system based on bwx_sdk proven pattern

**Status:** ✅ Complete - Based on bwx_sdk implementation
**Last Updated:** 2025-10-24

---

## Overview

Kalahari uses a robust internationalization system adapted from **bwx_sdk**, a proven C++/wxWidgets i18n implementation in production since 2015.

**Key Features:**
- wxWidgets wxLocale + GNU gettext
- Runtime language switching (no restart needed)
- Multi-catalog support (core + plugins)
- Automatic .po → .mo compilation (CMake)
- User-friendly language selection
- Fallback mechanism (system → default → English)

---

## Architecture (Based on bwx_sdk)

### Core Components

#### 1. KalahariI18n Class

Adapted from `bwx_sdk::bwxInternat`, inherits `wxLocale`:

```cpp
namespace kalahari {
namespace i18n {

class KalahariI18n : public wxLocale {
public:
    KalahariI18n();

    // Initialize with language short name ("pl", "en", etc.)
    bool Init(const wxString& shortName = wxEmptyString);

    // Initialize by full name ("Polski", "English")
    bool InitByName(const wxString& name);

    // Language management
    void AddLanguage(const Language& lang);
    void AddLanguageSystemDefault();
    void AddLanguageEnglish();
    void AddLanguagePolish();

    // Settings
    void SetDefaultLanguage(const Language& lang);
    Language GetDefaultLanguage() const;

    // Utilities
    wxArrayString GetLanguageNames() const;
    void ResetToDefaultLanguage();

private:
    Language m_defaultLang;
    LangMap m_langMap;  // Hash map: short name → Language
    wxString m_catalogFolder = "locale";

    bool LoadCatalogs(const wxLanguageInfo* langInfo);
};

} // namespace i18n
} // namespace kalahari
```

#### 2. Language Class

Encapsulates language metadata:

```cpp
class Language {
public:
    Language() noexcept;
    Language(const wxString& shortName,    // "pl"
             const wxString& name,          // "Polski"
             const wxString& unicodeName,   // "Polski" (for UI display)
             wxLanguage wxLangCode) noexcept;

    wxLanguage GetWxLangCode() const;
    const wxString& GetShortName() const;  // "pl"
    const wxString& GetName() const;        // "Polski"
    wxString GetUnicodeName() const;        // For display

private:
    wxLanguage m_wxLangCode;
    wxString m_shortName;
    wxString m_name;
    wxString m_unicodeName;
};
```

---

## Directory Structure

```
kalahari/
├── locale/                              # i18n folder
│   ├── kalahari.pot                     # Template (generated by xgettext)
│   │
│   ├── en/
│   │   ├── kalahari.po                  # English (source)
│   │   └── LC_MESSAGES/
│   │       ├── kalahari.mo              # Core strings (compiled)
│   │       └── kalahari-sys.mo          # wxWidgets system strings
│   │
│   ├── pl/
│   │   ├── kalahari.po                  # Polish translation (EDITABLE)
│   │   └── LC_MESSAGES/
│   │       ├── kalahari.mo              # Core strings (compiled)
│   │       ├── kalahari-sys.mo          # wxWidgets system strings
│   │       └── kalahari-plugins.mo      # Plugin strings (optional)
│   │
│   └── de/  # Post-MVP
│       ├── kalahari.po
│       └── LC_MESSAGES/
│           └── ...
│
├── include/kalahari/
│   └── kalahari_i18n.h                  # Header (adapted from bwx_sdk)
│
└── src/core/
    └── kalahari_i18n.cpp                # Implementation
```

---

## Translation Workflow

### Step 1: Extract Strings → .pot Template

Use `xgettext` to scan C++ code for translatable strings:

```bash
# Extract all _("...") strings from source code
xgettext --keyword=_ \
         --keyword=wxPLURAL:1,2 \
         --language=C++ \
         --add-comments=TRANSLATORS \
         --sort-output \
         --package-name=Kalahari \
         --package-version=1.0 \
         --msgid-bugs-address="bugs@kalahari.app" \
         --output=locale/kalahari.pot \
         $(find src include -name "*.cpp" -o -name "*.h")
```

**Output:** `locale/kalahari.pot` (Portable Object Template)

```po
# locale/kalahari.pot
msgid ""
msgstr ""
"Content-Type: text/plain; charset=UTF-8\n"

msgid "Save Project"
msgstr ""

msgid "Export to DOCX"
msgstr ""

msgid "You wrote %d word today"
msgid_plural "You wrote %d words today"
msgstr[0] ""
msgstr[1] ""
```

---

### Step 2: Create Language .po File

Initialize new language from template:

```bash
# Create Polish translation
msginit --input=locale/kalahari.pot \
        --locale=pl_PL.UTF-8 \
        --output=locale/pl/kalahari.po

# Create German translation
msginit --input=locale/kalahari.pot \
        --locale=de_DE.UTF-8 \
        --output=locale/de/kalahari.po
```

**Output:** `locale/pl/kalahari.po` (editable translation file)

```po
# locale/pl/kalahari.po
msgid ""
msgstr ""
"Language: pl\n"
"Plural-Forms: nplurals=3; plural=(n==1 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2);\n"

msgid "Save Project"
msgstr "Zapisz projekt"

msgid "Export to DOCX"
msgstr "Eksportuj do DOCX"

msgid "You wrote %d word today"
msgid_plural "You wrote %d words today"
msgstr[0] "Napisałeś dzisiaj %d słowo"
msgstr[1] "Napisałeś dzisiaj %d słowa"
msgstr[2] "Napisałeś dzisiaj %d słów"
```

---

### Step 3: Edit Translations

**Tools:**
- **Poedit** (GUI, recommended) - https://poedit.net/
- **Lokalize** (KDE GUI)
- **Text editor** (VSCode, Vim)

**Editing .po file:**

1. Open `locale/pl/kalahari.po` in Poedit
2. Translate each `msgid` → `msgstr`
3. Save (Poedit auto-compiles to .mo)

**Manual editing:**

```po
msgid "Chapter"
msgstr "Rozdział"

msgid "Add Chapter"
msgstr "Dodaj rozdział"

# Context comment for translator
#. TRANSLATORS: This appears in the file menu
msgid "Save"
msgstr "Zapisz"
```

---

### Step 4: Compile .po → .mo (Binary Format)

```bash
# Compile Polish translation
msgfmt locale/pl/kalahari.po \
       --output-file=locale/pl/LC_MESSAGES/kalahari.mo

# Check for errors
msgfmt --check locale/pl/kalahari.po
```

**Output:** `locale/pl/LC_MESSAGES/kalahari.mo` (binary, fast loading)

**Why .mo?**
- Fast loading (binary format)
- Smaller file size
- Runtime efficiency

---

### Step 5: Update Translations (Merge New Strings)

When code changes (new strings added):

```bash
# Re-extract strings
xgettext [options] --output=locale/kalahari.pot src/**/*.cpp

# Merge new strings into existing translations
msgmerge --update locale/pl/kalahari.po locale/kalahari.pot

# Fuzzy matches are marked with "#, fuzzy" - translator reviews these
# Obsolete strings are marked with "#~" - can be removed
```

**Result:** `kalahari.po` updated with new strings, old translations preserved

---

## CMake Integration (Automated Compilation)

```cmake
# CMakeLists.txt

# Find gettext tools
find_package(Gettext REQUIRED)

if(NOT GETTEXT_MSGFMT_EXECUTABLE)
    message(FATAL_ERROR "msgfmt not found. Install gettext.")
endif()

# Set locale directory
set(LOCALE_DIR "${CMAKE_SOURCE_DIR}/locale")
set(LOCALE_INSTALL_DIR "share/kalahari/locale")

# Find all .po files
file(GLOB_RECURSE PO_FILES "${LOCALE_DIR}/*/*.po")

set(MO_FILES "")

foreach(PO_FILE ${PO_FILES})
    # Extract language code (pl, de, en, etc.)
    get_filename_component(PO_DIR ${PO_FILE} DIRECTORY)
    get_filename_component(LANG ${PO_DIR} NAME)

    # Get catalog name (kalahari, kalahari-sys, kalahari-plugins)
    get_filename_component(PO_NAME ${PO_FILE} NAME_WE)

    # Output .mo file path
    set(MO_FILE "${CMAKE_BINARY_DIR}/locale/${LANG}/LC_MESSAGES/${PO_NAME}.mo")

    # Create output directory
    get_filename_component(MO_DIR ${MO_FILE} DIRECTORY)

    # Add custom command to compile .po → .mo
    add_custom_command(
        OUTPUT ${MO_FILE}
        COMMAND ${CMAKE_COMMAND} -E make_directory ${MO_DIR}
        COMMAND ${GETTEXT_MSGFMT_EXECUTABLE}
                --check
                --output-file=${MO_FILE}
                ${PO_FILE}
        DEPENDS ${PO_FILE}
        COMMENT "Compiling ${LANG}/${PO_NAME}.po → .mo"
    )

    list(APPEND MO_FILES ${MO_FILE})
endforeach()

# Target: compile all translations
add_custom_target(translations ALL DEPENDS ${MO_FILES})

# Add dependency: kalahari binary depends on translations
add_dependencies(kalahari translations)

# Install .mo files to share/kalahari/locale
install(DIRECTORY ${CMAKE_BINARY_DIR}/locale/
        DESTINATION ${LOCALE_INSTALL_DIR}
        FILES_MATCHING PATTERN "*.mo")
```

**Build behavior:**
```bash
cmake -B build
cmake --build build

# Automatically:
# 1. Scans locale/*/*.po files
# 2. Compiles each .po → .mo
# 3. Places .mo in build/locale/XX/LC_MESSAGES/
# 4. "make install" → copies to /usr/local/share/kalahari/locale/
```

---

## Usage in Code

### Initialization (main.cpp)

```cpp
#include "kalahari/kalahari_i18n.h"

using namespace kalahari::i18n;

int main(int argc, char** argv) {
    wxApp::CheckBuildOptions(WX_BUILD_OPTIONS_SIGNATURE, "Kalahari");

    // Initialize i18n
    KalahariI18n i18n;

    // Add supported languages
    i18n.AddLanguageSystemDefault();
    i18n.AddLanguageEnglish();
    i18n.AddLanguagePolish();
    // Post-MVP: i18n.AddLanguageGerman(), etc.

    // Set default fallback (English)
    i18n.SetDefaultLanguage(Language("en", "English", "English", wxLANGUAGE_ENGLISH));

    // Initialize (auto-detect system language or fallback)
    if (!i18n.Init()) {
        wxLogWarning("Failed to initialize i18n, using default language");
    }

    // Continue with wxApp initialization
    wxInitAllImageHandlers();
    MainFrame* frame = new MainFrame();
    frame->Show();

    return wxApp::OnRun();
}
```

---

### Marking Strings for Translation

#### Simple Strings

```cpp
// Use _() macro (wxWidgets built-in)
wxString msg = _("Save Project");
wxString tooltip = _("Click to save your project");
```

#### Strings with Variables

```cpp
// Use wxString::Format
int wordCount = 1234;
wxString msg = wxString::Format(_("You wrote %d words today"), wordCount);

// Multiple variables
wxString msg = wxString::Format(
    _("Project '%s' saved successfully in %.2f seconds"),
    projectName, elapsedTime
);
```

#### Plural Forms

```cpp
// wxGetTranslation handles plurals
int count = 5;
wxString msg = wxString::Format(
    wxGetTranslation("You wrote %d word", "You wrote %d words", count),
    count
);

// Polish will automatically choose correct form:
// 1 słowo, 2 słowa, 5 słów
```

#### Context (Disambiguation)

```cpp
// If same English word has different translations
wxString fileMenu = wxGetTranslation("File");        // Menu item
wxString fileNoun = wxGetTranslation("File", "noun"); // "A file on disk"

// In .po file:
// msgctxt "noun"
// msgid "File"
// msgstr "Plik"
//
// msgid "File"  (no context = menu)
// msgstr "Plik"
```

#### Multiline Strings

```cpp
wxString help = _(
    "Welcome to Kalahari!\n"
    "\n"
    "Use the project navigator to organize your book.\n"
    "Press F1 for help."
);
```

#### Don't Translate (Programmer Comments)

```cpp
// TRANSLATORS: This message appears when auto-save fails
wxString msg = _("Could not auto-save project");
```

---

### Runtime Language Switching

#### Menu: Tools → Language

```cpp
void MainFrame::OnLanguageSelected(wxCommandEvent& event) {
    wxString selectedLang = event.GetString();  // "Polski"

    // Switch language
    if (!m_i18n.InitByName(selectedLang)) {
        wxMessageBox(_("Failed to change language"), _("Error"),
                     wxOK | wxICON_ERROR);
        return;
    }

    // Recreate UI with new translations
    RecreateMenuBar();
    RecreateToolBar();
    RecreateStatusBar();
    UpdateAllPanels();

    // Save preference
    m_settings.SetString("language", m_i18n.GetCurrentLanguage().GetShortName());
    m_settings.Save();

    // Notify user
    wxMessageBox(
        _("Language changed successfully.\nSome changes may require restart."),
        _("Language"),
        wxOK | wxICON_INFORMATION
    );
}
```

#### Populate Language Menu

```cpp
void MainFrame::CreateLanguageMenu() {
    wxMenu* langMenu = new wxMenu();

    wxArrayString languages = m_i18n.GetLanguageNames();
    for (const auto& lang : languages) {
        langMenu->Append(wxID_ANY, lang);
    }

    langMenu->Bind(wxEVT_MENU, &MainFrame::OnLanguageSelected, this);

    // Add to Tools menu
    m_toolsMenu->AppendSubMenu(langMenu, _("Language"));
}
```

---

### Load User's Preferred Language (Startup)

```cpp
bool MainFrame::Initialize() {
    // Load saved language preference
    wxString savedLang = m_settings.GetString("language", "");

    if (!savedLang.IsEmpty()) {
        // User previously selected a language
        m_i18n.Init(savedLang);
    } else {
        // First run - use system language (already initialized in main())
    }

    return true;
}
```

---

## Multi-Catalog Support (Core + Plugins)

Based on bwx_sdk's `LoadCatalogs()` method:

```cpp
bool KalahariI18n::LoadCatalogs(const wxLanguageInfo* langInfo) {
    wxFileName localePath(wxGetCwd(), m_catalogFolder);
    AddCatalogLookupPathPrefix(localePath.GetFullPath());

    // Extract locale code (e.g., "pl" from "pl_PL")
    wxString localeCode = langInfo->CanonicalName.SubString(0, 1);

    // Load multiple catalogs
    std::vector<wxString> catalogs = {
        localeCode,                    // "pl" → pl.mo (core strings)
        localeCode + "-sys",           // "pl-sys" → pl-sys.mo (wxWidgets system)
        localeCode + "-plugins"        // "pl-plugins" → pl-plugins.mo (optional)
    };

    bool success = true;
    for (const auto& cat : catalogs) {
        if (!AddCatalog(cat)) {
            // Warning, not error (plugins catalog may not exist)
            wxLogWarning("Failed to load catalog: %s", cat);
            success = false;
        }
    }

    return success;
}
```

**Why multiple catalogs?**
- **Core strings:** `pl.mo` - Kalahari UI strings
- **System strings:** `pl-sys.mo` - wxWidgets standard dialogs ("OK", "Cancel", "Open", "Save")
- **Plugin strings:** `pl-plugins.mo` - Strings from Python plugins

**Plugins can provide their own .mo:**
```
plugins/docx_exporter/
├── locale/
│   ├── pl/
│   │   └── docx_exporter.mo
│   └── de/
│       └── docx_exporter.mo
```

Plugin loads its catalog:
```cpp
// In plugin initialization
wxLocale::Get()->AddCatalog("docx_exporter");
```

---

## Python Plugin i18n

### Expose Translation to Python (pybind11)

```cpp
// src/plugin/plugin_api.cpp

PYBIND11_MODULE(kalahari_core, m) {
    // Expose translation function
    m.def("translate", [](const std::string& text) -> std::string {
        return wxGetTranslation(text).ToStdString();
    });

    // Expose plural translation
    m.def("translate_plural",
          [](const std::string& singular, const std::string& plural, int n) -> std::string {
        return wxGetTranslation(singular, plural, n).ToStdString();
    });
}
```

### Python Plugin Usage

```python
# plugins/docx_exporter/plugin.py

from kalahari_core import translate as _
from kalahari_core import translate_plural

class DOCXExporter:
    def export(self, doc, path):
        # Translatable strings
        print(_("Exporting to DOCX..."))

        if success:
            # Plural
            msg = translate_plural(
                "Exported %d chapter",
                "Exported %d chapters",
                chapter_count
            ) % chapter_count
            print(msg)

            return True
```

### Plugin .po Files

Plugin can have its own translations:

```
plugins/docx_exporter/
├── plugin.py
├── locale/
│   ├── docx_exporter.pot
│   ├── pl/
│   │   └── docx_exporter.po
│   └── de/
│       └── docx_exporter.po
```

Extract Python strings:
```bash
xgettext --keyword=_ \
         --language=Python \
         --output=plugins/docx_exporter/locale/docx_exporter.pot \
         plugins/docx_exporter/*.py
```

---

## Date/Time Formatting

wxWidgets handles locale-specific formatting:

```cpp
#include <wx/datetime.h>

wxDateTime now = wxDateTime::Now();

// Locale-specific formats
wxString date = now.Format("%x");      // 10/24/2025 (en) or 24.10.2025 (pl)
wxString time = now.Format("%X");      // 10:30:45 PM (en) or 22:30:45 (pl)
wxString full = now.Format("%c");      // Full date + time

// Custom format (language-neutral)
wxString iso = now.FormatISODate();    // 2025-10-24
```

---

## Number Formatting

```cpp
#include <wx/numformatter.h>

double price = 1234.56;
int count = 1000000;

// With thousands separator
wxString formatted = wxNumberFormatter::ToString(
    price,
    2,  // decimal places
    wxNumberFormatter::Style_WithThousandsSep
);
// Output: "1,234.56" (en) or "1 234,56" (pl)

// Integer with separator
wxString formatted = wxNumberFormatter::ToString(
    count,
    0,
    wxNumberFormatter::Style_WithThousandsSep
);
// Output: "1,000,000" (en) or "1 000 000" (pl)
```

---

## Common Pitfalls & Best Practices

### ❌ DON'T: Concatenate Translated Strings

```cpp
// BAD - word order differs in other languages
wxString msg = _("Save") + " " + _("Project");
```

```cpp
// GOOD - translate complete phrase
wxString msg = _("Save Project");
```

---

### ❌ DON'T: Format Before Translation

```cpp
// BAD
wxString msg = wxString::Format("You wrote %d words", count);
msg = _(msg);  // Too late! Not in catalog
```

```cpp
// GOOD
wxString msg = wxString::Format(_("You wrote %d words"), count);
```

---

### ❌ DON'T: Hardcode Strings

```cpp
// BAD
wxMessageBox("File saved", "Success", wxOK);
```

```cpp
// GOOD
wxMessageBox(_("File saved"), _("Success"), wxOK);
```

---

### ❌ DON'T: Split Sentences

```cpp
// BAD - word order differs across languages
wxString msg = _("You have") + " " + std::to_string(n) + " " + _("unread messages");
```

```cpp
// GOOD
wxString msg = wxString::Format(_("You have %d unread messages"), n);
```

---

### ✅ DO: Add Translator Comments

```cpp
// TRANSLATORS: This appears in the title bar
wxString title = _("Kalahari - Writer's IDE");

// TRANSLATORS: %d is the number of chapters
wxString msg = wxString::Format(_("Saved %d chapters"), count);
```

---

### ✅ DO: Test with Actual Translations

- German strings are ~30% longer than English
- Polish has complex plural rules
- Test UI layout with translated strings (buttons, menus, dialogs)

---

### ✅ DO: Keep Strings in Context

```cpp
// Provide context for translators
msgctxt "menu"
msgid "File"
msgstr "Plik"

msgctxt "document"
msgid "File"
msgstr "Plik"
```

---

## Testing Translations

### Pseudo-Translation (Coverage Test)

Generate pseudo-locale to test i18n coverage:

```python
# scripts/pseudo_translate.py
# Transforms: "Hello" → "[Ħéļļö]"

import sys
import re

TRANSFORMS = str.maketrans({
    'a': 'á', 'e': 'é', 'i': 'í', 'o': 'ó', 'u': 'ú',
    'A': 'Á', 'E': 'É', 'I': 'Í', 'O': 'Ó', 'U': 'Ú',
    'l': 'ļ', 'n': 'ñ', 'c': 'ç'
})

def pseudo_translate(text):
    return "[" + text.translate(TRANSFORMS) + "]"

# Parse .pot, output pseudo .po
```

**Test:** If you see "[Ħéļļö]" in UI, that string is translated. If you see "Hello", it's hardcoded!

---

### String Length Testing

```bash
# Count string lengths in .po file
msgcat --no-wrap locale/pl/kalahari.po | grep "^msgstr" | awk '{print length}'

# Find longest strings
msgcat locale/pl/kalahari.po | grep -A1 "^msgid" | grep "msgstr" | sort -k2 -nr | head -20
```

Check UI: Do long German strings overflow buttons?

---

### Encoding Test

Ensure UTF-8 everywhere:

```bash
# Check file encoding
file locale/pl/kalahari.po
# Should output: UTF-8 Unicode text

# Validate .po file
msgfmt --check-format --check-domain locale/pl/kalahari.po
```

---

## Translation Guidelines (for Contributors)

Create `TRANSLATION.md`:

```markdown
# Translation Guidelines

## Getting Started

1. Fork the repository
2. Copy `locale/kalahari.pot` → `locale/XX/kalahari.po` (XX = language code)
3. Edit `locale/XX/kalahari.po` with Poedit or text editor
4. Test your translation (build Kalahari, switch language)
5. Submit Pull Request

## Style Guide

- **Tone:** Warm, professional, encouraging (match brand voice)
- **Terminology:** Use technical terms consistently (e.g., "Chapter" always "Rozdział" in Polish)
- **Formality:** Semi-formal (use "you" not "thou")
- **Length:** Try to match original length (±20%)
- **Punctuation:** Use target language conventions

## Technical Terms

- Keep English: API, plugin, DOCX, PDF, EPUB
- Translate: Chapter, Project, Editor, Assistant

## Testing

Run Kalahari, switch to your language, check:
- Menu items fit in menus
- Button labels fit in buttons
- Dialog texts display correctly
- No encoding issues (special characters)

## Questions?

Open GitHub Issue with label `translation`.
```

---

## Supported Languages (MVP vs Post-MVP)

### MVP (Required for 1.0)

| Language | Code | Status | Translator |
|----------|------|--------|------------|
| English | en | ✅ Complete (source) | Core team |
| Polish | pl | 🔄 In progress | Core team |

### Post-MVP (Phases 6+)

| Language | Code | Status | Priority |
|----------|------|--------|----------|
| German | de | ⏳ Planned | High |
| Russian | ru | ⏳ Planned | Medium |
| French | fr | ⏳ Planned | Medium |
| Spanish | es | ⏳ Planned | Medium |
| Portuguese | pt | ⏳ Planned | Low |
| Italian | it | ⏳ Planned | Low |
| Japanese | ja | ⏳ Planned | Low |
| Chinese | zh | ⏳ Planned | Low |

---

## Implementation Timeline

### Phase 0 (Foundation) - Weeks 1-8
- ✅ Adapt bwx_sdk code (KalahariI18n class)
- ✅ Create kalahari_i18n.h and kalahari_i18n.cpp
- ✅ Setup CMake .po → .mo compilation
- ✅ Add EN + PL language support
- ✅ Initialize i18n in main.cpp

### Phase 1 (Core Editor) - Weeks 9-20
- Mark all UI strings with _() macro
- Extract strings (xgettext → kalahari.pot)
- Create pl.po (Polish translation draft)
- Test language switching

### Phase 2-4 (Features) - Weeks 21-56
- Continue marking strings
- Update .pot regularly (weekly)
- Update .po files (msgmerge)
- Plugin i18n (Python bindings)

### Phase 5 (Polish & Release) - Weeks 57-68
- Complete Polish translation (100%)
- Professional translation review
- Test all UI with both languages
- Fix layout issues (long strings)
- Final .pot extraction
- Deliver EN + PL 100% complete

### Post-1.0
- Add German, Russian, French, Spanish
- Community translations
- Translation portal (e.g., Weblate)

---

## Tools Reference

### Required Tools

**xgettext** - Extract translatable strings
```bash
sudo apt install gettext  # Ubuntu/Debian
brew install gettext      # macOS
```

**msgfmt** - Compile .po → .mo
```bash
# Included with gettext package
```

**msginit** - Create new .po from .pot
```bash
# Included with gettext package
```

**msgmerge** - Update .po with new strings
```bash
# Included with gettext package
```

### Optional Tools

**Poedit** - GUI translation editor
- Website: https://poedit.net/
- Cross-platform (Windows, macOS, Linux)
- Auto-compiles to .mo
- Translation memory
- Terminology management

**Lokalize** - KDE translation tool
```bash
sudo apt install lokalize
```

**Weblate** - Web-based translation platform
- Host: https://weblate.org/
- For community translations (post-MVP)

---

## Files Summary

### Source Files (to be created in Phase 0)

```
include/kalahari/kalahari_i18n.h        # Header (adapted from bwx_sdk)
src/core/kalahari_i18n.cpp              # Implementation
```

### Locale Files

```
locale/
├── kalahari.pot                        # Template (generated)
├── en/
│   └── LC_MESSAGES/kalahari.mo
└── pl/
    ├── kalahari.po                     # Editable translation
    └── LC_MESSAGES/
        ├── kalahari.mo                 # Compiled
        ├── kalahari-sys.mo             # wxWidgets system
        └── kalahari-plugins.mo         # Plugin strings
```

### Build Output

```
build/
└── locale/
    ├── en/LC_MESSAGES/kalahari.mo
    └── pl/LC_MESSAGES/kalahari.mo
```

### Installed Files

```
/usr/local/share/kalahari/locale/       # Linux
C:\Program Files\Kalahari\locale\       # Windows
/Applications/Kalahari.app/Contents/Resources/locale/  # macOS
```

---

## Related Documents

- **[02_tech_stack.md](02_tech_stack.md)** - wxWidgets, gettext details
- **[03_architecture.md](03_architecture.md)** - Where i18n fits in architecture
- **[08_gui_design.md](08_gui_design.md)** - UI strings that need translation
- **[10_branding.md](10_branding.md)** - Brand voice & tone for translations

---

## References

- **bwx_sdk** - https://github.com/bartoszwarzocha/bwx_sdk (original implementation)
- **wxWidgets i18n** - https://docs.wxwidgets.org/stable/overview_i18n.html
- **GNU gettext** - https://www.gnu.org/software/gettext/
- **gettext.org** - https://www.gnu.org/software/gettext/manual/
- **Poedit** - https://poedit.net/

---

**Version:** 1.0
**Status:** ✅ Complete - Based on bwx_sdk proven pattern
**Last Updated:** 2025-10-24
